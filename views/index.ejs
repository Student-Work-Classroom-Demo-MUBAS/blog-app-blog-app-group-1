<%-include('partials/header') %>
  <%- include('partials/navigation') %>

  <section>
    <h2>Welcome to Malawi</h2>
    <p>Explore the beautiful Landscapes, rich culture and incredible wildlife of the Warm Heart of Africa.</p>
  </section>

  <% if (posts && posts.length) { %>
    <div class="empty-state">
      <h2>No posts yet</h2>
      <p>Be the first to share your Malawi experience!</p>
      <a href="/post/new" class="btn">Create a New Post</a>
    </div>
  <% } else { %>
    <section>
      <h2>Recent Posts</h2>
      <% posts.forEach(post => { %>
        <article class="post-preview ">
          <h3><a href="/post/<%= post._id %>"><%= post.title %></a></h3>
          <p class="post-meta">Posted on <%= post.createdAt.toDateString() %></p>
          <p class="post-content">
            <%= post.content.substring(0, 150) %>
            <% if (post.content.length > 150) { %>...<% } %>
            </p>
              <div class="post-actions">
                <a href="/post/<%= post._id %>" class="btn read-more">Read More</a>
                <a href="/post/<%= post._id %>/edit" class="btn edit">Edit</a>
                <form action="/post/<%= post._id %>?_method=DELETE" method="POST" class="inline-form">
                  <button type="submit" class="btn delete" onclick="return confirm('Are you sure you want to delete this post?')">Delete</button>
                </form>
              </div>
                </article>
            <% }) %>
        </section>
    <% } %>

<%- include('partials/footer') %>